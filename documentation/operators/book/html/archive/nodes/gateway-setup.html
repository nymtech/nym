<!DOCTYPE HTML>
<html lang="en" class="coal" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Gateway - Nym Operators Guide</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="Everything needed to run Nym Mixnet components">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../.././themes/custom.css">
        <link rel="stylesheet" href="../.././themes/mdbook-admonish.css">
        <link rel="stylesheet" href="../.././themes/pagetoc.css">

<!--        -->
    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "coal" : "coal";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('coal')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><li class="part-title">Summary</li><li class="chapter-item "><a href="../../introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item "><a href="../../changelog.html"><strong aria-hidden="true">2.</strong> Changelog</a></li><li class="chapter-item "><a href="../../release-cycle.html"><strong aria-hidden="true">3.</strong> Release Cycle</a></li><li class="chapter-item "><a href="../../sandbox.html"><strong aria-hidden="true">4.</strong> Sandbox Testnet</a></li><li class="chapter-item affix "><li class="part-title">Binaries</li><li class="chapter-item "><a href="../../binaries/pre-built-binaries.html"><strong aria-hidden="true">5.</strong> Pre-built Binaries</a></li><li class="chapter-item "><a href="../../binaries/building-nym.html"><strong aria-hidden="true">6.</strong> Building from Source</a></li><li class="chapter-item affix "><li class="part-title">Operators Guides</li><li class="chapter-item "><a href="../../nodes/preliminary-steps.html"><strong aria-hidden="true">7.</strong> Preliminary Steps</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../nodes/wallet-preparation.html"><strong aria-hidden="true">7.1.</strong> Nym Wallet Preparation</a></li><li class="chapter-item "><a href="../../nodes/vps-setup.html"><strong aria-hidden="true">7.2.</strong> VPS Setup</a></li></ol></li><li class="chapter-item "><a href="../../nodes/nym-node.html"><strong aria-hidden="true">8.</strong> Nym Node</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../nodes/setup.html"><strong aria-hidden="true">8.1.</strong> Setup & Run</a></li><li class="chapter-item "><a href="../../nodes/configuration.html"><strong aria-hidden="true">8.2.</strong> Configuration</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../nodes/proxy-configuration.html"><strong aria-hidden="true">8.2.1.</strong> WSS & Reversed Proxy</a></li></ol></li><li class="chapter-item "><a href="../../nodes/bonding.html"><strong aria-hidden="true">8.3.</strong> Bonding</a></li></ol></li><li class="chapter-item "><a href="../../nodes/validator-setup.html"><strong aria-hidden="true">9.</strong> Nyx Validator Setup</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../nodes/nym-api.html"><strong aria-hidden="true">9.1.</strong> Nym API Setup</a></li><li class="chapter-item "><a href="../../nodes/nyx-configuration.html"><strong aria-hidden="true">9.2.</strong> Validator & API Configuration</a></li></ol></li><li class="chapter-item "><a href="../../nodes/maintenance.html"><strong aria-hidden="true">10.</strong> Maintenance</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../nodes/manual-upgrade.html"><strong aria-hidden="true">10.1.</strong> Manual Node Upgrade</a></li><li class="chapter-item "><a href="../../nodes/nymvisor-upgrade.html"><strong aria-hidden="true">10.2.</strong> Automatic Node Upgrade: Nymvisor Setup and Usage</a></li></ol></li><li class="chapter-item "><a href="../../testing/performance.html"><strong aria-hidden="true">11.</strong> Performance Monitoring & Testing</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../testing/gateway-probe.html"><strong aria-hidden="true">11.1.</strong> Gateway Probe</a></li><li class="chapter-item "><a href="../../testing/node-api-check.html"><strong aria-hidden="true">11.2.</strong> Node API Check</a></li><li class="chapter-item "><a href="../../testing/prometheus-grafana.html"><strong aria-hidden="true">11.3.</strong> Prometheus & Grafana</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../testing/explorenym-scripts.html"><strong aria-hidden="true">11.3.1.</strong> ExploreNYM scripts</a></li></ol></li></ol></li><li class="chapter-item "><li class="part-title">Troubleshooting</li><li class="chapter-item "><a href="../../troubleshooting/vps-isp.html"><strong aria-hidden="true">12.</strong> VPS Setup</a></li><li class="chapter-item "><a href="../../troubleshooting/nodes.html"><strong aria-hidden="true">13.</strong> Nym Node</a></li><li class="chapter-item "><a href="../../troubleshooting/validators.html"><strong aria-hidden="true">14.</strong> Validators</a></li><li class="chapter-item affix "><li class="part-title">Token Economics</li><li class="chapter-item "><a href="../../tokenomics/validator-rewards.html"><strong aria-hidden="true">15.</strong> Nyx: Validator Rewards</a></li><li class="chapter-item affix "><li class="part-title">FAQ</li><li class="chapter-item "><a href="../../faq/general-faq.html"><strong aria-hidden="true">16.</strong> General Operators FAQ</a></li><li class="chapter-item "><a href="../../faq/nym-nodes-faq.html"><strong aria-hidden="true">17.</strong> Nym Nodes</a></li><li class="chapter-item "><a href="../../faq/nyx-faq.html"><strong aria-hidden="true">18.</strong> Nyx & Validators</a></li><li class="chapter-item affix "><li class="part-title">Community & Legal Forum</li><li class="chapter-item "><a href="../../legal/exit-gateway.html"><strong aria-hidden="true">19.</strong> Exit Gateway</a></li><li class="chapter-item "><a href="../../legal/community-counsel.html"><strong aria-hidden="true">20.</strong> Community Counsel</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../legal/isp-list.html"><strong aria-hidden="true">20.1.</strong> ISP List</a></li><li class="chapter-item "><a href="../../legal/jurisdictions.html"><strong aria-hidden="true">20.2.</strong> Jurisdictions</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../legal/swiss.html"><strong aria-hidden="true">20.2.1.</strong> Switzerland</a></li><li class="chapter-item "><a href="../../legal/united-states.html"><strong aria-hidden="true">20.2.2.</strong> United States</a></li></ol></li><li class="chapter-item "><a href="../../legal/landing-pages.html"><strong aria-hidden="true">20.3.</strong> Landing Pages</a></li></ol></li><li class="chapter-item "><a href="../../legal/add-content.html"><strong aria-hidden="true">21.</strong> How to Add Info</a></li><li class="chapter-item affix "><li class="spacer"></li><li class="chapter-item affix "><li class="part-title">Archive</li><li class="chapter-item "><a href="../../archive/archive.html"><strong aria-hidden="true">22.</strong> Why archive?</a></li><li class="chapter-item expanded "><a href="../../archive/nodes/setup-guides.html"><strong aria-hidden="true">23.</strong> Mixnet Nodes Setup</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../archive/nodes/initial-steps.html"><strong aria-hidden="true">23.1.</strong> Preliminary Steps</a></li><li class="chapter-item "><a href="../../archive/nodes/mix-node-setup.html"><strong aria-hidden="true">23.2.</strong> Mix Node</a></li><li class="chapter-item expanded "><a href="../../archive/nodes/gateway-setup.html" class="active"><strong aria-hidden="true">23.3.</strong> Gateway</a></li><li class="chapter-item "><a href="../../archive/nodes/network-requester-setup.html"><strong aria-hidden="true">23.4.</strong> Network Requester</a></li></ol></li><li class="chapter-item "><a href="../../archive/faq/mixnodes-faq.html"><strong aria-hidden="true">24.</strong> FAQ: Mix Nodes</a></li><li class="chapter-item "><a href="../../archive/faq/smoosh-faq.html"><strong aria-hidden="true">25.</strong> FAQ: Project Smoosh</a></li><li class="chapter-item affix "><li class="spacer"></li><li class="chapter-item affix "><li class="part-title">Misc.</li><li class="chapter-item "><a href="../../coc.html"><strong aria-hidden="true">26.</strong> Code of Conduct</a></li><li class="chapter-item "><a href="../../toc.html"><strong aria-hidden="true">27.</strong> Terms & Conditions</a></li><li class="chapter-item "><a href="../../licensing.html"><strong aria-hidden="true">28.</strong> Licensing</a></li><li class="chapter-item affix "><li class="spacer"></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>

                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Dark</button></li>
                        </ul>

                        <!-- CUSTOM -->
                        <select id="dropdown-menu" class="icon-button">
                            <option value="https://nymtech.net/docs">Network Docs</option>
                            <option value="https://nymtech.net/learn/papers">Academic Papers</option>
                            <option value="">--------</option>
                            <option value="https://nymtech.net/developers">Dev Portal</option>
                            <option value="https://nymtech.net/developers/sdk/rust/rust.html">Rust SDK</option>
                            <option value="https://sdk.nymtech.net">Typescript SDK</option>
                            <option value="">--------</option>
                            <option value="https://nymtech.net/operators">Operators</option>
                            <option value="https://nymtech.net/developers/nymvpn/intro.html">NymVPN Testing</option>
                        </select>

                        <script>
                            document.getElementById('dropdown-menu').addEventListener('change', function() {
                                const selected = this.options[this.selectedIndex];
                                if (selected.value !== '') {
                                    window.location.href = selected.value;
                                }
                            });
                        </script>
                        
                        <!-- END CUSTOM -->
                    </div>

                    <h1 class="menu-title"> Nym Operators Guide</h1>

                    <div class="right-buttons">
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/nymtech/nym" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <main>
                            <div class="sidetoc">
                                <nav class="pagetoc"></nav>
                            </div>
                            <div class="content-wrap">

                        <h1 id="gateways"><a class="header" href="#gateways">Gateways</a></h1>
<div id="admonition-warning" class="admonition admonish-warning" role="note" aria-labelledby="admonition-warning-title">
<div class="admonition-title">
<div id="admonition-warning-title">
<p>Warning</p>
</div>
<a class="admonition-anchor-link" href="#admonition-warning"></a>
</div>
<div>
<p><strong>This is an archived page for backwards compatibility for existing node operators. To start a new node or migrate, follow the <a href="../../nodes/nym-node.html"><code>nym-node</code> guides</a>.</strong> The content of this page is not updated since April 19th 2024. Eventually this page will be terminated!</p>
</div>
</div>
<blockquote>
<p>The Nym gateway was built in the <a href="../../binaries/building-nym.html">building nym</a> section. If you haven’t yet built Nym and want to run the code, go there first.</p>
</blockquote>
<div id="admonition-info" class="admonition admonish-info" role="note" aria-labelledby="admonition-info-title">
<div class="admonition-title">
<div id="admonition-info-title">
<p>Info</p>
</div>
<a class="admonition-anchor-link" href="#admonition-info"></a>
</div>
<div>
<p>As a result of <a href="../faq/smoosh-faq.html">Project Smoosh</a>, the current version of <code>nym-gateway</code> binary also contains <code>nym-network-requester</code> functionality which can be enabled <a href="./gateway-setup.html#initialising-gateway-with-network-requester">by the operator</a>. This combination is a basis of <em><strong>Nym Exit Gateway</strong></em> node - an essential piece in our new setup. Please read more in our <a href="../faq/smoosh-faq.html">Project Smoosh FAQ</a> and <a href="../../legal/exit-gateway.html">Exit Gateway</a> pages. We recommend operators begin to shift their setups to this new combined node, instead of operating two separate binaries.</p>
</div>
</div>
<blockquote>
<p>Any syntax in <code>&lt;&gt;</code> brackets is a user’s unique variable. Exchange with a corresponding name without the <code>&lt;&gt;</code> brackets.</p>
</blockquote>
<h2 id="current-version"><a class="header" href="#current-version">Current version</a></h2>
<p>The last version before migration to <a href="../../nodes/nym-node.html"><code>nym-node</code></a> was <code>1.1.33</code>.</p>
<h2 id="preliminary-steps"><a class="header" href="#preliminary-steps">Preliminary steps</a></h2>
<p>Make sure you do the preparation listed in the <a href="initial-steps.html">preliminary steps page</a> before setting up your Gateway.</p>
<h2 id="gateway-setup"><a class="header" href="#gateway-setup">Gateway setup</a></h2>
<p>Now that you have built the codebase, set up your wallet, and have a VPS with the <code>nym-gateway</code> binary, you can set up your gateway with the instructions below.</p>
<p>To begin, move to <code>/target/release</code> directory from which you run the node commands:</p>
<pre><code>cd target/release
</code></pre>
<h3 id="viewing-command-help"><a class="header" href="#viewing-command-help">Viewing command help</a></h3>
<p>You can check that your binaries are properly compiled with:</p>
<pre><code>./nym-gateway --help
</code></pre>
<p>You can also check the various arguments required for individual commands with:</p>
<pre><code>./nym-gateway &lt;COMMAND&gt; --help
</code></pre>
<blockquote>
<p>Adding <code>--no-banner</code> startup flag will prevent Nym banner being printed even if run in tty environment.</p>
</blockquote>
<h2 id="initialising-your-gateway"><a class="header" href="#initialising-your-gateway">Initialising your Gateway</a></h2>
<p>As Nym developers build towards <a href="../../legal/exit-gateway.html">Exit Gateway</a> functionality, operators can now run their <code>nym-gateway</code> binary with inbuilt Network Requester and include the our new <a href="https://nymtech.net/.wellknown/network-requester/exit-policy.txt">exit policy</a>. Considering the plan to <a href="../faq/smoosh-faq.html"><em>smoosh</em></a> all the nodes into one binary and have wide opened Exit Gateways, we recommend this setup, instead of operating two separate binaries.</p>
<div id="admonition-warning-1" class="admonition admonish-warning" role="note" aria-labelledby="admonition-warning-1-title">
<div class="admonition-title">
<div id="admonition-warning-1-title">
<p>Warning</p>
</div>
<a class="admonition-anchor-link" href="#admonition-warning-1"></a>
</div>
<div>
<p>Before you start an Exit Gateway, read our <a href="../../legal/exit-gateway.html">Operators Legal Forum</a> page and <a href="../faq/smoosh-faq.html"><em>Project Smoosh FAQ</em></a>.</p>
</div>
</div>
<div id="admonition-info-1" class="admonition admonish-info" role="note" aria-labelledby="admonition-info-1-title">
<div class="admonition-title">
<div id="admonition-info-1-title">
<p>Info</p>
</div>
<a class="admonition-anchor-link" href="#admonition-info-1"></a>
</div>
<div>
<p>There has been an ongoing development with dynamic upgrades. Follow the status of the Project Smoosh <a href="../faq/smoosh-faq.html#what-are-the-changes">changes</a> and the progression state of exit policy <a href="../faq/smoosh-faq.html#how-will-the-exit-policy-be-implemented">implementation</a> to be up to date with the current design.</p>
</div>
</div>
<p><strong>Note:</strong> Due to the development towards Exit Gateway functionality the <code>--host</code> flag has been replaced with <code>--listening-address</code>, this is the IP address which is used for receiving sphinx packets and listening to client data. Another flag <code>--public-ips</code> is required; it’s a comma separated list of IP’s that are announced to the <code>nym-api</code>, it is usually the address which is used for bonding.</p>
<h3 id="initialising-exit-gateway"><a class="header" href="#initialising-exit-gateway">Initialising Exit Gateway</a></h3>
<p>An operator can initialise the Exit Gateway functionality by adding Network Requester with the new exit policy option:</p>
<pre><code>./nym-gateway init --id &lt;ID&gt; --listening-address 0.0.0.0 --public-ips "$(curl -4 https://ifconfig.me)" --with-network-requester --with-exit-policy true
</code></pre>
<p>You can see that the printed information besides <em>identity</em> and <em>sphinx keys</em> also includes a long string called <em>address</em>. This is the address to be provided to your local <a href="https://nymtech.net/docs/clients/socks5-client.html">socks5 client</a> as a <code>--provider</code> if you wish to connect to your own Exit Gateway.</p>
<p>Additionally</p>
<h4 id="add-network-requester-to-an-existing-gateway"><a class="header" href="#add-network-requester-to-an-existing-gateway">Add Network Requester to an existing Gateway</a></h4>
<p>If you already <a href="../../nodes/manual-upgrade.html">upgraded</a> your Gateway to the <a href="./gateway-setup.html#current-version">latest version</a> and initialised without a Network Requester, you can easily change its functionality to Exit Gateway with a command <code>setup-network-requester</code>.</p>
<p>See the options:</p>
<pre><code>./nym-gateway setup-network-requester --help
</code></pre>
<p>To setup Exit Gateway functionality with our new <a href="https://nymtech.net/.wellknown/network-requester/exit-policy.txt">exit policy</a> add a flag <code>--with-exit-policy true</code>.</p>
<pre><code>./nym-gateway setup-network-requester --enabled true --with-exit-policy true --id &lt;ID&gt;
</code></pre>
<p>Say we have a Gateway with <code>&lt;ID&gt;</code> as <code>new-gateway</code>, originally initialised and ran without the Exit Gateway functionality. To change the setup, run:</p>
<pre><code>./nym-gateway setup-network-requester --enabled true --with-exit-policy true --id new-gateway
</code></pre>
<p>In case there are any unexpected problems, you can also change it manually by editing the Gateway config file stored in <code>/home/user/.nym/gateways/&lt;ID&gt;/config/config.toml</code> where the line under <code>[network_requester]</code> needs to be edited from <code>false</code> to <code>true</code>.</p>
<pre><code>[network_requester]
# Specifies whether Network Requester service is enabled in this process.
enabled = true
</code></pre>
<p>Save, exit and restart your Gateway. Now you are an operator of post-smooshed Exit Gateway.</p>
<h4 id="enable-nym-exit-policy-to-an-existing-gateway-with-network-requester-functionality"><a class="header" href="#enable-nym-exit-policy-to-an-existing-gateway-with-network-requester-functionality">Enable Nym exit policy to an existing Gateway with Network Requester functionality</a></h4>
<p>In case you already added Network Requester functionality to your Gateway as described above but haven’t enabled the <a href="https://nymtech.net/.wellknown/network-requester/exit-policy.txt">exit policy</a> there is an easy tweak to do so and turn your node into <a href="../faq/smoosh-faq.html#what-are-the-changes">Nym Exit Gateway</a>.</p>
<p>Open the config file stored at <code>.nym/gateways/&lt;ID&gt;/config/network_requester_config.toml</code> and set:</p>
<pre><code class="language-sh">use_deprecated_allow_list = false
</code></pre>
<p>Save, exit and restart your Gateway. Now you are an operator of post-smooshed Exit gateway.</p>
<div id="admonition-info-2" class="admonition admonish-info" role="note" aria-labelledby="admonition-info-2-title">
<div class="admonition-title">
<div id="admonition-info-2-title">
<p>Info</p>
</div>
<a class="admonition-anchor-link" href="#admonition-info-2"></a>
</div>
<div>
<p>All information about Network Requester part of your Exit Gateway is in <code>/home/user/.nym/gateways/&lt;ID&gt;/config/network_requester_config.toml</code>.</p>
</div>
</div>
<p>For now you can run Gateway without Network Requester or with and without the new exit policy. This will soon change as we inform in our <a href="../faq/smoosh-faq.html#how-will-the-exit-policy-be-implemented">Project Smoosh FAQ</a>.</p>
<p>To read more about the configuration like whitelisted outbound requesters in <code>allowed.list</code> and other useful information, see the page <a href="network-requester-setup.html#using-your-network-requester"><em>Network Requester whitelist</em></a>.</p>
<h4 id="initialising-gateway-without-network-requester"><a class="header" href="#initialising-gateway-without-network-requester">Initialising Gateway without Network Requester</a></h4>
<p>In case you don’t want to run your Gateway with the Exit Gateway functionality, you still can run a simple Gateway.</p>
<p>To check available configuration options use:</p>
<pre><code> ./nym-gateway init --help
</code></pre>
<p>The following command returns a Gateway on your current IP with the <code>&lt;ID&gt;</code> of <code>simple-gateway</code>:</p>
<pre><code>./nym-gateway init --id simple-gateway --listening-address 0.0.0.0 --public-ips "$(curl -4 https://ifconfig.me)"
</code></pre>
<p>The <code>$(curl -4 https://ifconfig.me)</code> command above returns your IP automatically using an external service. Alternatively, you can enter your IP manually if you wish. If you do this, remember to enter your IP <strong>without</strong> any port information.</p>
<h2 id="running-your-gateway"><a class="header" href="#running-your-gateway">Running your Gateway</a></h2>
<p>The <code>run</code> command starts the Gateway:</p>
<pre><code>./nym-gateway run --id &lt;ID&gt;
</code></pre>
<h2 id="bonding-your-gateway"><a class="header" href="#bonding-your-gateway">Bonding your Gateway</a></h2>
<div id="admonition-info-3" class="admonition admonish-info" role="note" aria-labelledby="admonition-info-3-title">
<div class="admonition-title">
<div id="admonition-info-3-title">
<p>Info</p>
</div>
<a class="admonition-anchor-link" href="#admonition-info-3"></a>
</div>
<div>
<p>Before you bond your Gateway, please make sure the <a href="../../nodes/maintenance.html#configure-your-firewall">firewall configuration</a> is setup so your Gateway can be reached from the outside. You can also setup WSS and automate your Gateway to simplify the operation overhead. We highly recommend to run any of these steps before bonding to prevent disruption of your Gateway’s routing score later on.</p>
</div>
</div>
<h3 id="via-the-desktop-wallet-recommended"><a class="header" href="#via-the-desktop-wallet-recommended">Via the Desktop wallet (recommended)</a></h3>
<p>You can bond your Gateway via the Desktop wallet. <strong>Make sure your Gateway is running first</strong>, then follow the steps below:</p>
<ol>
<li>
<p>Open your wallet, and head to the <code>Bonding</code> page, then select the node type <code>Gateway</code> and input your node details. Press <code>Next</code>.</p>
</li>
<li>
<p>Enter the <code>Amount</code>, <code>Operating cost</code> and press <code>Next</code>.</p>
</li>
<li>
<p>You will be asked to run a the <code>sign</code> command with your <code>gateway</code> - copy and paste the long signature <code>&lt;PAYLOAD_GENERATED_BY_THE_WALLET&gt;</code> and paste it as a value of <code>--contract-msg</code> in the following command:</p>
</li>
</ol>
<pre><code>./nym-gateway sign --id &lt;YOUR_ID&gt; --contract-msg &lt;PAYLOAD_GENERATED_BY_THE_WALLET&gt;
</code></pre>
<p>It will look something like this (as <code>&lt;YOUR_ID&gt;</code> we used <code>supergateway</code>):</p>
<details id="admonition-console-output" class="admonition admonish-example" role="note" aria-labelledby="admonition-console-output-title">
<summary class="admonition-title">
<div id="admonition-console-output-title">
<p>Console output</p>
</div>
<a class="admonition-anchor-link" href="#admonition-console-output"></a>
</summary>
<div>
<pre><code>./nym-gateway sign --id supergateway --contract-msg 2Mf8xYytgEeyJke9LA7TjhHoGQWNBEfgHZtTyy2krFJfGHSiqy7FLgTnauSkQepCZTqKN5Yfi34JQCuog9k6FGA2EjsdpNGAWHZiuUGDipyJ6UksNKRxnFKhYW7ri4MRduyZwbR98y5fQMLAwHne1Tjm9cXYCn8McfigNt77WAYwBk5bRRKmC34BJMmWcAxphcLES2v9RdSR68tkHSpy2C8STfdmAQs3tZg8bJS5Qa8pQdqx14TnfQAPLk3QYCynfUJvgcQTrg29aqCasceGRpKdQ3Tbn81MLXAGAs7JLBbiMEAhCezAr2kEN8kET1q54zXtKz6znTPgeTZoSbP8rzf4k2JKHZYWrHYF9JriXepuZTnyxAKAxvGFPBk8Z6KAQi33NRQkwd7MPyttatHna6kG9x7knffV6ebGzgRBf7NV27LurH8x4L1uUXwm1v1UYCA1WSBQ9Pp2JW69k5v5v7G9gBy8RUcZnMbeL26Qqb8WkuGcmuHhaFfoqSfV7PRHPpPT4M8uRqUyR4bjUtSJJM1yh6QSeZk9BEazzoJqPeYeGoiFDZ3LMj2jesbJweQR4caaYuRczK92UGSSqu9zBKmE45a


      _ __  _   _ _ __ ___
     | '_ \| | | | '_ \ _ \
     | | | | |_| | | | | | |
     |_| |_|\__, |_| |_| |_|
            |___/

             (nym-gateway - version v1.1.&lt;XX&gt;)


&gt;&gt;&gt; attempting to sign 2Mf8xYytgEeyJke9LA7TjhHoGQWNBEfgHZtTyy2krFJfGHSiqy7FLgTnauSkQepCZTqKN5Yfi34JQCuog9k6FGA2EjsdpNGAWHZiuUGDipyJ6UksNKRxnFKhYW7ri4MRduyZwbR98y5fQMLAwHne1Tjm9cXYCn8McfigNt77WAYwBk5bRRKmC34BJMmWcAxphcLES2v9RdSR68tkHSpy2C8STfdmAQs3tZg8bJS5Qa8pQdqx14TnfQAPLk3QYCynfUJvgcQTrg29aqCasceGRpKdQ3Tbn81MLXAGAs7JLBbiMEAhCezAr2kEN8kET1q54zXtKz6znTPgeTZoSbP8rzf4k2JKHZYWrHYF9JriXepuZTnyxAKAxvGFPBk8Z6KAQi33NRQkwd7MPyttatHna6kG9x7knffV6ebGzgRBf7NV27LurH8x4L1uUXwm1v1UYCA1WSBQ9Pp2JW69k5v5v7G9gBy8RUcZnMbeL26Qqb8WkuGcmuHhaFfoqSfV7PRHPpPT4M8uRqUyR4bjUtSJJM1yh6QSeZk9BEazzoJqPeYeGoiFDZ3LMj2jesbJweQR4caaYuRczK92UGSSqu9zBKmE45a
&gt;&gt;&gt; decoding the message...
&gt;&gt;&gt; message to sign: {"nonce":0,"algorithm":"ed25519","message_type":"gateway-bonding","content":{"sender":"n1ewmme88q22l8syvgshqma02jv0vqrug9zq9dy8","proxy":null,"funds":[{"denom":"unym","amount":"100000000"}],"data":{"gateway":{"host":"62.240.134.189","mix_port":1789,"clients_port":9000,"location":"62.240.134.189","sphinx_key":"FKbuN7mPdoCG9jA3CkAfXxC5X4rHhqeMVtmfRtJ3cFZd","identity_key":"3RoAhR8gEdfBETMjm2vbMFzKddxXDdE9ygBAnJHWqSzD","version":"1.1.13"}}}}
&gt;&gt;&gt; The base58-encoded signature is:
2SPDjLjX4b6XEtkgG7yD8Znsb1xycL1edFvRK4JcVnPsM9k6HXEUUeVS6rswRiYxoj1bMgiRKyPDwiksiuyxu8Xi
</code></pre>
</div>
</details>
<ul>
<li>Copy the resulting signature:</li>
</ul>
<pre><code class="language-sh"># &gt;&gt;&gt; The base58-encoded signature is:
2SPDjLjX4b6XEtkgG7yD8Znsb1xycL1edFvRK4JcVnPsM9k6HXEUUeVS6rswRiYxoj1bMgiRKyPDwiksiuyxu8Xi
</code></pre>
<ul>
<li>And paste it into the wallet nodal, press <code>Next</code> and confirm the transaction.</li>
</ul>
<p><img src="../../images/wallet-screenshots/wallet-gateway-sign.png" alt="Paste Signature" />
<em>This image is just an example, copy-paste your own base58-encoded signature.</em></p>
<ul>
<li>Your Gateway is now bonded.</li>
</ul>
<blockquote>
<p>You are asked to <code>sign</code> a transaction on bonding so that the Mixnet smart contract is able to map your Nym address to your node. This allows us to create a nonce for each account and defend against replay attacks.</p>
</blockquote>
<h3 id="via-the-cli-power-users"><a class="header" href="#via-the-cli-power-users">Via the CLI (power users)</a></h3>
<p>If you want to bond your Gateway via the CLI, then check out the <a href="https://nymtech.net/docs/tools/nym-cli.html#bond-a-mix-node">relevant section in the Nym CLI</a> docs.</p>
<h2 id="maintenance"><a class="header" href="#maintenance">Maintenance</a></h2>
<p>For Gateway upgrade, firewall setup, port configuration, API endpoints, VPS suggestions, automation, WSS setup and more, see the <a href="../../nodes/maintenance.html">maintenance page</a></p>
<footer id="last-change">Last change: 2024-08-06, commit: <a href="https://github.com/nymtech/nym/commit/7e36595d8">7e36595d8</a></footer>
                            </div>
                        </main>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../archive/nodes/mix-node-setup.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../archive/nodes/network-requester-setup.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../archive/nodes/mix-node-setup.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../archive/nodes/network-requester-setup.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>


        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../.././themes/pagetoc.js"></script>



    </div>
    </body>
</html>
