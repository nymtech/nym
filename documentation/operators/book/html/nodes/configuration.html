<!DOCTYPE HTML>
<html lang="en" class="coal" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Configuration - Nym Operators Guide</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="Everything needed to run Nym Mixnet components">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href=".././themes/custom.css">
        <link rel="stylesheet" href=".././themes/mdbook-admonish.css">
        <link rel="stylesheet" href=".././themes/pagetoc.css">

<!--        -->
    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "coal" : "coal";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('coal')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><li class="part-title">Summary</li><li class="chapter-item "><a href="../introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item "><a href="../changelog.html"><strong aria-hidden="true">2.</strong> Changelog</a></li><li class="chapter-item "><a href="../release-cycle.html"><strong aria-hidden="true">3.</strong> Release Cycle</a></li><li class="chapter-item "><a href="../sandbox.html"><strong aria-hidden="true">4.</strong> Sandbox Testnet</a></li><li class="chapter-item affix "><li class="part-title">Binaries</li><li class="chapter-item "><a href="../binaries/pre-built-binaries.html"><strong aria-hidden="true">5.</strong> Pre-built Binaries</a></li><li class="chapter-item "><a href="../binaries/building-nym.html"><strong aria-hidden="true">6.</strong> Building from Source</a></li><li class="chapter-item affix "><li class="part-title">Operators Guides</li><li class="chapter-item "><a href="../nodes/preliminary-steps.html"><strong aria-hidden="true">7.</strong> Preliminary Steps</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../nodes/wallet-preparation.html"><strong aria-hidden="true">7.1.</strong> Nym Wallet Preparation</a></li><li class="chapter-item "><a href="../nodes/vps-setup.html"><strong aria-hidden="true">7.2.</strong> VPS Setup</a></li></ol></li><li class="chapter-item expanded "><a href="../nodes/nym-node.html"><strong aria-hidden="true">8.</strong> Nym Node</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../nodes/setup.html"><strong aria-hidden="true">8.1.</strong> Setup & Run</a></li><li class="chapter-item expanded "><a href="../nodes/configuration.html" class="active"><strong aria-hidden="true">8.2.</strong> Configuration</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../nodes/proxy-configuration.html"><strong aria-hidden="true">8.2.1.</strong> WSS & Reversed Proxy</a></li></ol></li><li class="chapter-item "><a href="../nodes/bonding.html"><strong aria-hidden="true">8.3.</strong> Bonding</a></li></ol></li><li class="chapter-item "><a href="../nodes/validator-setup.html"><strong aria-hidden="true">9.</strong> Nyx Validator Setup</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../nodes/nym-api.html"><strong aria-hidden="true">9.1.</strong> Nym API Setup</a></li><li class="chapter-item "><a href="../nodes/nyx-configuration.html"><strong aria-hidden="true">9.2.</strong> Validator & API Configuration</a></li></ol></li><li class="chapter-item "><a href="../nodes/maintenance.html"><strong aria-hidden="true">10.</strong> Maintenance</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../nodes/manual-upgrade.html"><strong aria-hidden="true">10.1.</strong> Manual Node Upgrade</a></li><li class="chapter-item "><a href="../nodes/nymvisor-upgrade.html"><strong aria-hidden="true">10.2.</strong> Automatic Node Upgrade: Nymvisor Setup and Usage</a></li></ol></li><li class="chapter-item "><a href="../testing/performance.html"><strong aria-hidden="true">11.</strong> Performance Monitoring & Testing</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../testing/gateway-probe.html"><strong aria-hidden="true">11.1.</strong> Gateway Probe</a></li><li class="chapter-item "><a href="../testing/node-api-check.html"><strong aria-hidden="true">11.2.</strong> Node API Check</a></li><li class="chapter-item "><a href="../testing/prometheus-grafana.html"><strong aria-hidden="true">11.3.</strong> Prometheus & Grafana</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../testing/explorenym-scripts.html"><strong aria-hidden="true">11.3.1.</strong> ExploreNYM scripts</a></li></ol></li></ol></li><li class="chapter-item "><li class="part-title">Troubleshooting</li><li class="chapter-item "><a href="../troubleshooting/vps-isp.html"><strong aria-hidden="true">12.</strong> VPS Setup</a></li><li class="chapter-item "><a href="../troubleshooting/nodes.html"><strong aria-hidden="true">13.</strong> Nym Node</a></li><li class="chapter-item "><a href="../troubleshooting/validators.html"><strong aria-hidden="true">14.</strong> Validators</a></li><li class="chapter-item affix "><li class="part-title">Token Economics</li><li class="chapter-item "><a href="../tokenomics/validator-rewards.html"><strong aria-hidden="true">15.</strong> Nyx: Validator Rewards</a></li><li class="chapter-item affix "><li class="part-title">FAQ</li><li class="chapter-item "><a href="../faq/general-faq.html"><strong aria-hidden="true">16.</strong> General Operators FAQ</a></li><li class="chapter-item "><a href="../faq/nym-nodes-faq.html"><strong aria-hidden="true">17.</strong> Nym Nodes</a></li><li class="chapter-item "><a href="../faq/nyx-faq.html"><strong aria-hidden="true">18.</strong> Nyx & Validators</a></li><li class="chapter-item affix "><li class="part-title">Community & Legal Forum</li><li class="chapter-item "><a href="../legal/exit-gateway.html"><strong aria-hidden="true">19.</strong> Exit Gateway</a></li><li class="chapter-item "><a href="../legal/community-counsel.html"><strong aria-hidden="true">20.</strong> Community Counsel</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../legal/isp-list.html"><strong aria-hidden="true">20.1.</strong> ISP List</a></li><li class="chapter-item "><a href="../legal/jurisdictions.html"><strong aria-hidden="true">20.2.</strong> Jurisdictions</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../legal/swiss.html"><strong aria-hidden="true">20.2.1.</strong> Switzerland</a></li><li class="chapter-item "><a href="../legal/united-states.html"><strong aria-hidden="true">20.2.2.</strong> United States</a></li></ol></li><li class="chapter-item "><a href="../legal/landing-pages.html"><strong aria-hidden="true">20.3.</strong> Landing Pages</a></li></ol></li><li class="chapter-item "><a href="../legal/add-content.html"><strong aria-hidden="true">21.</strong> How to Add Info</a></li><li class="chapter-item affix "><li class="spacer"></li><li class="chapter-item affix "><li class="part-title">Archive</li><li class="chapter-item "><a href="../archive/archive.html"><strong aria-hidden="true">22.</strong> Why archive?</a></li><li class="chapter-item "><a href="../archive/nodes/setup-guides.html"><strong aria-hidden="true">23.</strong> Mixnet Nodes Setup</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../archive/nodes/initial-steps.html"><strong aria-hidden="true">23.1.</strong> Preliminary Steps</a></li><li class="chapter-item "><a href="../archive/nodes/mix-node-setup.html"><strong aria-hidden="true">23.2.</strong> Mix Node</a></li><li class="chapter-item "><a href="../archive/nodes/gateway-setup.html"><strong aria-hidden="true">23.3.</strong> Gateway</a></li><li class="chapter-item "><a href="../archive/nodes/network-requester-setup.html"><strong aria-hidden="true">23.4.</strong> Network Requester</a></li></ol></li><li class="chapter-item "><a href="../archive/faq/mixnodes-faq.html"><strong aria-hidden="true">24.</strong> FAQ: Mix Nodes</a></li><li class="chapter-item "><a href="../archive/faq/smoosh-faq.html"><strong aria-hidden="true">25.</strong> FAQ: Project Smoosh</a></li><li class="chapter-item affix "><li class="spacer"></li><li class="chapter-item affix "><li class="part-title">Misc.</li><li class="chapter-item "><a href="../coc.html"><strong aria-hidden="true">26.</strong> Code of Conduct</a></li><li class="chapter-item "><a href="../toc.html"><strong aria-hidden="true">27.</strong> Terms & Conditions</a></li><li class="chapter-item "><a href="../licensing.html"><strong aria-hidden="true">28.</strong> Licensing</a></li><li class="chapter-item affix "><li class="spacer"></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>

                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Dark</button></li>
                        </ul>

                        <!-- CUSTOM -->
                        <select id="dropdown-menu" class="icon-button">
                            <option value="https://nymtech.net/docs">Network Docs</option>
                            <option value="https://nymtech.net/learn/papers">Academic Papers</option>
                            <option value="">--------</option>
                            <option value="https://nymtech.net/developers">Dev Portal</option>
                            <option value="https://nymtech.net/developers/sdk/rust/rust.html">Rust SDK</option>
                            <option value="https://sdk.nymtech.net">Typescript SDK</option>
                            <option value="">--------</option>
                            <option value="https://nymtech.net/operators">Operators</option>
                            <option value="https://nymtech.net/developers/nymvpn/intro.html">NymVPN Testing</option>
                        </select>

                        <script>
                            document.getElementById('dropdown-menu').addEventListener('change', function() {
                                const selected = this.options[this.selectedIndex];
                                if (selected.value !== '') {
                                    window.location.href = selected.value;
                                }
                            });
                        </script>
                        
                        <!-- END CUSTOM -->
                    </div>

                    <h1 class="menu-title"> Nym Operators Guide</h1>

                    <div class="right-buttons">
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/nymtech/nym" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <main>
                            <div class="sidetoc">
                                <nav class="pagetoc"></nav>
                            </div>
                            <div class="content-wrap">

                        <h1 id="nym-node-configuration"><a class="header" href="#nym-node-configuration">Nym Node Configuration</a></h1>
<h2 id="basic-changes"><a class="header" href="#basic-changes">Basic Changes</a></h2>
<p>Nym Node can be configured directly by editing the config file (<code>config.toml</code>) located at <code>~/.nym/nym-nodes/&lt;ID&gt;/config/config.toml</code> (by default <code>~/.nym/nym-nodes/default-nym-node/config/config.toml</code>) or through commands on the binary.</p>
<h3 id="node-description"><a class="header" href="#node-description">Node Description</a></h3>
<p>Operators can add a description themselves to share more information about their <code>nym-node</code> publicly.</p>
<p>To add or change <code>nym-node</code> description is done by editing <code>description.toml</code> file located in <code>~/.nym/nym-nodes/&lt;NODE_ID&gt;/data/description.toml</code>. After saving, don’t forget to reload and restart your node <a href="#systemd">service</a> or simply restart your <code>nym-node</code> if you run it without a service (not recommended).</p>
<p><strong>Query description</strong></p>
<p>Nodes description can be queried from API endpoint <code>/api/v1/description</code> or via Swagger API UI page <code>/api/v1/swagger/#/Node/description</code>.</p>
<pre><code class="language-bash">curl -X 'GET' \
  'http://&lt;NODE_IP_ADDRESS&gt;:8080/api/v1/description' \
  -H 'accept: application/json'

# or for https reversed proxy or WSS setup

curl -X 'GET' \
  'https://&lt;HOSTNAME&gt;/api/v1/description' \
  -H 'accept: application/json'
</code></pre>
<h3 id="commands--examples"><a class="header" href="#commands--examples">Commands &amp; Examples</a></h3>
<p>Disable sharing of system hardware info with the network:</p>
<pre><code class="language-sh">./nym-node run --id &lt;ID&gt; --deny-init --mode entry-gateway -w --expose-system-hardware false --expose-system-info false
</code></pre>
<p>Note: <code>--expose-system-info false</code> supersedes <code>--expose-system-hardware false</code>. If both are present with conflicting values, the system hardware will not be shown.</p>
<h2 id="vps-setup-and-automation"><a class="header" href="#vps-setup-and-automation">VPS Setup and Automation</a></h2>
<blockquote>
<p>Replace <code>&lt;NODE&gt;</code> variable with type of node you run, preferably <code>nym-node</code> (depreciated <code>nym-mixnode</code>, <code>nym-gateway</code> or <code>nym-network-requester</code>).</p>
</blockquote>
<h3 id="automating-your-node-with-nohup-tmux-and-systemd"><a class="header" href="#automating-your-node-with-nohup-tmux-and-systemd">Automating your node with nohup, tmux and systemd</a></h3>
<p>Although it’s not totally necessary, it’s useful to have the Mix Node automatically start at system boot time. We recommend to run your remote operation via <a href="maintenance.html#tmux"><code>tmux</code></a> for easier management and a handy return to your previous session. For full automation, including a failed node auto-restart and <code>ulimit</code> setup, <a href="maintenance.html#systemd"><code>systemd</code></a> is a good choice.</p>
<blockquote>
<p>Do any of these steps and run your automated node before you start bonding process!</p>
</blockquote>
<h4 id="nohup"><a class="header" href="#nohup">nohup</a></h4>
<p><code>nohup</code> is a command with which your terminal is told to ignore the <code>HUP</code> or ‘hangup’ signal. This will stop the node process ending if you kill your session.</p>
<pre><code class="language-sh">nohup ./&lt;NODE&gt; run &lt;OTHER_FLAGS&gt; # use all the flags you use to run your node
</code></pre>
<h4 id="tmux"><a class="header" href="#tmux">tmux</a></h4>
<p>One way is to use <code>tmux</code> shell on top of your current VPS terminal. Tmux is a terminal multiplexer, it allows you to create several terminal windows and panes from a single terminal. Processes started in <code>tmux</code> keep running after closing the terminal as long as the given <code>tmux</code> window was not terminated.</p>
<p>Use the following command to get <code>tmux</code>.</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Platform</th><th style="text-align: left">Install Command</th></tr></thead><tbody>
<tr><td style="text-align: left">Arch Linux</td><td style="text-align: left"><code>pacman -S tmux</code></td></tr>
<tr><td style="text-align: left">Debian or Ubuntu</td><td style="text-align: left"><code>apt install tmux</code></td></tr>
<tr><td style="text-align: left">Fedora</td><td style="text-align: left"><code>dnf install tmux</code></td></tr>
<tr><td style="text-align: left">RHEL or CentOS</td><td style="text-align: left"><code>yum install tmux</code></td></tr>
<tr><td style="text-align: left">macOS (using Homebrew</td><td style="text-align: left"><code>brew install tmux</code></td></tr>
<tr><td style="text-align: left">macOS (using MacPorts)</td><td style="text-align: left"><code>port install tmux</code></td></tr>
<tr><td style="text-align: left">openSUSE</td><td style="text-align: left"><code>zypper install tmux</code></td></tr>
</tbody></table>
</div>
<p>In case it didn’t work for your distribution, see how to build <code>tmux</code> from <a href="https://github.com/tmux/tmux#from-version-control">version control</a>.</p>
<p><strong>Running tmux</strong></p>
<p>Now you have installed tmux on your VPS, let’s run a Mix Node on tmux, which allows you to detach your terminal and let your <code>&lt;NODE&gt;</code> run on its own on the VPS.</p>
<ul>
<li>Pause your <code>&lt;NODE&gt;</code></li>
<li>Start tmux with the command</li>
</ul>
<pre><code class="language-sh">tmux
</code></pre>
<ul>
<li>The tmux terminal should open in the same working directory, just the layout changed into tmux default layout.</li>
<li>Start the <code>&lt;NODE&gt;</code> again with a command:</li>
</ul>
<pre><code class="language-sh">./&lt;NODE&gt; run &lt;OTHER_FLAGS&gt; # use all the flags you use to run your node
</code></pre>
<ul>
<li>Now, without closing the tmux window, you can close the whole terminal and the <code>&lt;NODE&gt;</code> (and any other process running in tmux) will stay active.</li>
<li>Next time just start your teminal, ssh into the VPS and run the following command to attach back to your previous session:</li>
</ul>
<pre><code class="language-sh">tmux attach-session
</code></pre>
<ul>
<li>To see keybinding options of tmux press <code>ctrl</code>+<code>b</code> and after 1 second <code>?</code></li>
</ul>
<h4 id="systemd"><a class="header" href="#systemd">systemd</a></h4>
<p>To automate with <code>systemd</code> use this init service file by saving it as <code>/etc/systemd/system/nym-node.service</code> and follow the <a href="#following-steps-for-nym-nodes-running-as-systemd-service">next steps</a>.</p>
<ol>
<li>Open the service file in a text editor</li>
</ol>
<pre><code class="language-sh">nano /etc/systemd/system/nym-node.service
</code></pre>
<ol start="2">
<li>Paste this config file, substitute <code>&lt;USER&gt;</code> and <code>&lt;PATH&gt;</code> with your correct values and add all flags to run your <code>nym-node</code> to <code>ExecStart</code> line:</li>
</ol>
<pre><code class="language-ini">[Unit]
Description=Nym Node
StartLimitInterval=350
StartLimitBurst=10

[Service]
User=&lt;USER&gt;
LimitNOFILE=65536
ExecStart=/home/&lt;USER&gt;/&lt;PATH&gt;/nym-node run # add all the flags you use to run your node
KillSignal=SIGINT
Restart=on-failure
RestartSec=30

[Install]
WantedBy=multi-user.target
</code></pre>
<div id="admonition-default" class="admonition admonish-warning" role="note">
<div>
<p><a href="setup.html#terms--conditions">Accepting T&amp;Cs</a> is done via a flag <code>--accept-operator-terms-and-conditions</code> added explicitly to <code>nym-node run</code> command every time. If you use systemd automation, add the flag to your service file’s <code>ExecStart</code> line.</p>
</div>
</div>
<ol start="3">
<li>Save the file</li>
</ol>
<div id="admonition-note" class="admonition admonish-note" role="note" aria-labelledby="admonition-note-title">
<div class="admonition-title">
<div id="admonition-note-title">
<p>Note</p>
</div>
<a class="admonition-anchor-link" href="#admonition-note"></a>
</div>
<div>
<p>Make sure your <code>ExecStart &lt;FULL_PATH&gt;</code> and <code>run</code> command are correct!</p>
<p>Example: If you have built nym in the <code>$HOME</code> directory on your server, your username is <code>jetpanther</code>, and node <code>&lt;ID&gt;</code> is <code>puma</code>, then the <code>ExecStart</code> line (command) in the script located in <code>/etc/systemd/system/nym-mixnode.service</code> for Nym Mixnode might look like this:
<code>ExecStart=/home/jetpanther/nym/target/release/nym-node run --id puma</code>.</p>
<p>Basically, you want the full <code>/&lt;PATH&gt;/&lt;TO&gt;/nym-mixnode run --id &lt;WHATEVER-YOUR-NODE-ID-IS&gt;</code>. If you are unsure about your <code>/&lt;PATH&gt;/&lt;TO&gt;/&lt;NODE&gt;</code>, then <code>cd</code> to your directory where you run your <code>&lt;NODE&gt;</code> from and run <code>pwd</code> command which returns the full path for you.</p>
</div>
</div>
<h4 id="following-steps-for-nym-nodes-running-as-systemd-service"><a class="header" href="#following-steps-for-nym-nodes-running-as-systemd-service">Following steps for Nym nodes running as <code>systemd</code> service</a></h4>
<p>Once your <code>init</code> file is saved follow these steps:</p>
<ol>
<li>Reload systemctl to pickup the new unit file</li>
</ol>
<pre><code class="language-sh">systemctl daemon-reload
</code></pre>
<ol start="2">
<li>Enable the newly created service:</li>
</ol>
<pre><code class="language-sh">systemctl enable nym-node.service
</code></pre>
<ol start="3">
<li>Start your <code>&lt;NODE&gt;</code> as a <code>systemd</code> service:</li>
</ol>
<pre><code class="language-sh">service nym-node start
</code></pre>
<p>This will cause your <code>&lt;NODE&gt;</code> to start at system boot time. If you restart your machine, your <code>&lt;NODE&gt;</code> will come back up automatically.</p>
<p><strong>Useful systemd commands</strong></p>
<ul>
<li>You can monitor system logs of your node by running:</li>
</ul>
<pre><code class="language-sh">journalctl -u nym-node -f
</code></pre>
<ul>
<li>Or check a status by running:</li>
</ul>
<pre><code class="language-sh">systemctl status &lt;NODE&gt;.service
# for example systemctl status nym-node.service
</code></pre>
<ul>
<li>You can also do <code>service &lt;NODE&gt; stop</code> or <code>service &lt;NODE&gt; restart</code>.</li>
</ul>
<p><strong>Note:</strong> if you make any changes to your <code>systemd</code> script after you’ve enabled it, you will need to run:</p>
<pre><code class="language-sh">systemctl daemon-reload
</code></pre>
<p>This lets your operating system know it’s ok to reload the service configuration. Then restart your <code>&lt;NODE&gt;</code>.</p>
<h2 id="connectivity-test-and-configuration"><a class="header" href="#connectivity-test-and-configuration">Connectivity Test and Configuration</a></h2>
<p>During our ongoing testing events <a href="https://nymtech.net/events/fast-and-furious">Fast and Furious</a> we found out, that after introducing IP Packet Router (IPR) and <a href="https://nymtech.net/.wellknown/network-requester/exit-policy.txt">Nym exit policy</a> on embedded Network Requester (NR) by default,  only a fragment of Gateways routes correctly through IPv4 and IPv6. We built a useful monitor to check out your Gateway (<code>nym-node --mode exit-gateway</code>) at <a href="https://harbourmaster.nymtech.net/">harbourmaster.nymtech.net</a>.</p>
<p>IPv6 routing is not only a case for gateways. Imagine a rare occasion when you run a <code>mixnode</code> without IPv6 enabled and a client will sent IPv6 packets through the Mixnet through such route:</p>
<pre><code class="language-ascii">[client] -&gt; [entry-gateway] -&gt; [mixnode layer 1] -&gt; [your mixnode] -&gt; [IPv6 mixnode layer3] -&gt; [exit-gateway]
</code></pre>
<p>In this (unusual) case your <code>mixnode</code> will not be able to route the packets. The node will drop the packets and its performance would go down. For that reason it’s beneficial to have IPv6 enabled when running a <code>mixnode</code> functionality.</p>
<div id="admonition-info" class="admonition admonish-info" role="note" aria-labelledby="admonition-info-title">
<div class="admonition-title">
<div id="admonition-info-title">
<p>Info</p>
</div>
<a class="admonition-anchor-link" href="#admonition-info"></a>
</div>
<div>
<p>We recommend operators to configure their <code>nym-node</code> with the full routing configuration.</p>
<p>However, most of the time the packets sent through the Mixnet are IPv4 based. The IPv6 packets are still pretty rare and therefore it’s not mandatory from operational point of view to have this configuration implemented if you running only <code>mixnode</code> mode.</p>
<p>If you preparing to run a <code>nym-node</code> with all modes enabled in the future, this setup is required.</p>
</div>
</div>
<div id="admonition-delegation-program" class="admonition admonish-tip" role="note" aria-labelledby="admonition-delegation-program-title">
<div class="admonition-title">
<div id="admonition-delegation-program-title">
<p>Delegation Program</p>
</div>
<a class="admonition-anchor-link" href="#admonition-delegation-program"></a>
</div>
<div>
<p>For everyone participating in Delegation Program or Service Grant program, this setup is a requirement!</p>
</div>
</div>
<h3 id="quick-ipv6-check"><a class="header" href="#quick-ipv6-check">Quick IPv6 Check</a></h3>
<p>You can always check IPv6 address and connectivity by using some of these methods:</p>
<details id="admonition-test-ipv6-methods" class="admonition admonish-example" role="note" aria-labelledby="admonition-test-ipv6-methods-title">
<summary class="admonition-title">
<div id="admonition-test-ipv6-methods-title">
<p>Test IPv6 methods</p>
</div>
<a class="admonition-anchor-link" href="#admonition-test-ipv6-methods"></a>
</summary>
<div>
<pre><code class="language-sh"># locally listed IPv6 addresses
ip -6 addr

# globally reachable IPv6 addresses
ip -6 addr show scope global

# with DNS
dig -6 TXT +short o-o.myaddr.l.google.com @ns1.google.com
dig -t aaaa +short myip.opendns.com @resolver1.opendns.com

# https check
curl -6 https://ifconfig.co
curl -6 https://ipv6.icanhazip.com

# using telnet
telnet -6 ipv6.telnetmyip.com
</code></pre>
</div>
</details>
<div id="admonition-caution" class="admonition admonish-warning" role="note" aria-labelledby="admonition-caution-title">
<div class="admonition-title">
<div id="admonition-caution-title">
<p>Caution</p>
</div>
<a class="admonition-anchor-link" href="#admonition-caution"></a>
</div>
<div>
<p>Make sure to keep your IPv4 address enabled while setting up IPv6, as the majority of routing goes through that one!</p>
</div>
</div>
<h3 id="routing-configuration"><a class="header" href="#routing-configuration">Routing Configuration</a></h3>
<p>While we’re working on Rust implementation to have these settings as a part of the binary build, to solve these connectivity requirements in the meantime we wrote a script <a href="https://gist.github.com/tommyv1987/ccf6ca00ffb3d7e13192edda61bb2a77"><code>network_tunnel_manager.sh</code></a> to support the operators to configure their servers and address all the connectivity requirements.</p>
<p>Networking configuration across different ISPs and various operation systems does not have a generic solution. If the provided configuration setup doesn’t solve your problem check out <a href="../troubleshooting/vps-isp.html#ipv6-troubleshooting">IPv6 troubleshooting</a> page. Be aware that you may have to do more research, customised adjustments or contact your ISP to change settings for your VPS.</p>
<p>The <code>nymtun0</code> interface is dynamically managed by the <code>exit-gateway</code> service. When the service is stopped, <code>nymtun0</code> disappears, and when started, <code>nymtun0</code> is recreated.</p>
<p>The <code>nymwg</code> interface is used for creating a secure wireguard tunnel as part of the Nym Network configuration. Similar to <code>nymtun0</code>, the script manages iptables rules specific to <code>nymwg</code> to ensure proper routing and forwarding through the wireguard tunnel. The <code>nymwg</code> interface needs to be correctly configured and active for the related commands to function properly. This includes applying or removing iptables rules and running connectivity tests through the <code>nymwg</code> tunnel.</p>
<p>The script should be used in a context where <code>nym-node</code> is running to fully utilise its capabilities, particularly for fetching IPv6 addresses or applying network rules that depend on the <code>nymtun0</code> and <code>nymwg</code> interfaces and to establish a WireGuard tunnel.</p>
<p><strong>Before starting with the following configuration, make sure you have the <a href="https://github.com/nymtech/nym/releases/">latest <code>nym-node</code> binary</a> installed and your <a href="vps-setup.html">VPS setup</a> finished properly!</strong></p>
<ol>
<li>Download <code>network_tunnel_manager.sh</code>, make executable and run:</li>
</ol>
<pre><code class="language-sh">curl -L https://gist.githubusercontent.com/tommyv1987/ccf6ca00ffb3d7e13192edda61bb2a77/raw/74241cc06492b955e582052939090f57a285a65e/network_tunnel_manager.sh -o network_tunnel_manager.sh &amp;&amp; \
chmod +x network_tunnel_manager.sh &amp;&amp; \
./network_tunnel_manager.sh
</code></pre>
<ol start="2">
<li>Make sure your <code>nym-node</code> service is up and running</li>
</ol>
<ul>
<li><strong>If you setting up a new node and not upgrading an existing one, keep it running and <a href="bonding.html">bond</a> your node now</strong>. Then come back here and follow the rest of the configuration.</li>
</ul>
<div id="admonition-default-1" class="admonition admonish-tip" role="note">
<div>
<p>Run the following steps as root or with <code>sudo</code> prefix!</p>
</div>
</div>
<ol start="3">
<li>Display IPv6:</li>
</ol>
<ul>
<li>At this point you should see a <code>global ipv6</code> address.</li>
</ul>
<pre><code class="language-sh">./network_tunnel_manager.sh fetch_and_display_ipv6
</code></pre>
<details id="admonition-correct-network_tunnel_managersh-fetch_and_display_ipv6-output" class="admonition admonish-example" role="note" aria-labelledby="admonition-correct-network_tunnel_managersh-fetch_and_display_ipv6-output-title">
<summary class="admonition-title">
<div id="admonition-correct-network_tunnel_managersh-fetch_and_display_ipv6-output-title">
<p>Correct <code>./network_tunnel_manager.sh fetch_and_display_ipv6</code> output:</p>
</div>
<a class="admonition-anchor-link" href="#admonition-correct-network_tunnel_managersh-fetch_and_display_ipv6-output"></a>
</summary>
<div>
<pre><code class="language-sh">iptables-persistent is already installed.
Using IPv6 address: 2001:db8:a160::1/112 #the address will be different for you
operation fetch_ipv6_address_nym_tun completed successfully.
</code></pre>
</div>
</details>
<ol start="4">
<li>Apply the rules for IPv4 and IPv6:</li>
</ol>
<pre><code class="language-sh">./network_tunnel_manager.sh apply_iptables_rules
</code></pre>
<ul>
<li>The process may prompt you if you want to save current IPv4 and IPv6 rules, choose yes.</li>
</ul>
<p><img src="../images/ip_table_prompt.png" alt="" /></p>
<ol start="5">
<li>Check Nymtun IP tables:</li>
</ol>
<ul>
<li>If there’s no process running it wouldn’t return anything.</li>
<li>In case you see <code>nymtun0</code> but not active, this is probably because you are setting up a new (never bonded) node and not upgrading an existing one.</li>
</ul>
<pre><code class="language-sh">./network_tunnel_manager.sh check_nymtun_iptables
</code></pre>
<details id="admonition-correct-network_tunnel_managersh-check_nymtun_iptables-output" class="admonition admonish-example" role="note" aria-labelledby="admonition-correct-network_tunnel_managersh-check_nymtun_iptables-output-title">
<summary class="admonition-title">
<div id="admonition-correct-network_tunnel_managersh-check_nymtun_iptables-output-title">
<p>Correct <code>./network_tunnel_manager.sh check_nymtun_iptables</code> output:</p>
</div>
<a class="admonition-anchor-link" href="#admonition-correct-network_tunnel_managersh-check_nymtun_iptables-output"></a>
</summary>
<div>
<pre><code class="language-sh">
iptables-persistent is already installed.
network Device: eth0
---------------------------------------

inspecting IPv4 firewall rules...
Chain FORWARD (policy DROP 0 packets, 0 bytes)
    0     0 ufw-reject-forward  all  --  *      *       0.0.0.0/0            0.0.0.0/0
    0     0 ACCEPT     all  --  nymtun0 eth0    0.0.0.0/0            0.0.0.0/0
    0     0 ACCEPT     all  --  eth0   nymtun0  0.0.0.0/0            0.0.0.0/0            state RELATED,ESTABLISHED
    0     0 ACCEPT     all  --  nymtun0 eth0    0.0.0.0/0            0.0.0.0/0
    0     0 ACCEPT     all  --  eth0   nymtun0  0.0.0.0/0            0.0.0.0/0            state RELATED,ESTABLISHED
    0     0 ACCEPT     all  --  nymtun0 eth0    0.0.0.0/0            0.0.0.0/0
    0     0 ACCEPT     all  --  eth0   nymtun0  0.0.0.0/0            0.0.0.0/0            state RELATED,ESTABLISHED
---------------------------------------

inspecting IPv6 firewall rules...
Chain FORWARD (policy DROP 0 packets, 0 bytes)
    0     0 ufw6-reject-forward  all      *      *       ::/0                 ::/0
    0     0 ACCEPT     all      eth0   nymtun0  ::/0                 ::/0                 state RELATED,ESTABLISHED
    0     0 ACCEPT     all      nymtun0 eth0    ::/0                 ::/0
    0     0 ACCEPT     all      eth0   nymtun0  ::/0                 ::/0                 state RELATED,ESTABLISHED
    0     0 ACCEPT     all      nymtun0 eth0    ::/0                 ::/0
    0     0 ACCEPT     all      eth0   nymtun0  ::/0                 ::/0                 state RELATED,ESTABLISHED
    0     0 ACCEPT     all      nymtun0 eth0    ::/0                 ::/0
operation check_nymtun_iptables completed successfully.
</code></pre>
</div>
</details>
<ol start="6">
<li>Apply the rules for WG routing:</li>
</ol>
<pre><code class="language-sh">./network_tunnel_manager.sh apply_iptables_rules_wg
</code></pre>
<ol start="7">
<li>Apply rules to configure DNS routing and allow ICMP piung test for node probing (network testing):</li>
</ol>
<pre><code class="language-sh">./network_tunnel_manager.sh configure_dns_and_icmp_wg
</code></pre>
<ol start="8">
<li>Check <code>nymtun0</code> interface:</li>
</ol>
<pre><code class="language-sh">ip addr show nymtun0
</code></pre>
<details id="admonition-correct-ip-addr-show-nymtun0-output" class="admonition admonish-example" role="note" aria-labelledby="admonition-correct-ip-addr-show-nymtun0-output-title">
<summary class="admonition-title">
<div id="admonition-correct-ip-addr-show-nymtun0-output-title">
<p>Correct <code>ip addr show nymtun0</code> output:</p>
</div>
<a class="admonition-anchor-link" href="#admonition-correct-ip-addr-show-nymtun0-output"></a>
</summary>
<div>
<pre><code class="language-sh"># your addresses will be different
8: nymtun0: &lt;POINTOPOINT,MULTICAST,NOARP,UP,LOWER_UP&gt; mtu 1420 qdisc fq_codel state UNKNOWN group default qlen 500
    link/none
    inet 10.0.0.1/16 scope global nymtun0
       valid_lft forever preferred_lft forever
    inet6 2001:db8:a160::1/112 scope global
       valid_lft forever preferred_lft forever
    inet6 fe80::ad08:d167:5700:8c7c/64 scope link stable-privacy
       valid_lft forever preferred_lft forever`
</code></pre>
</div>
</details>
<ol start="9">
<li>Validate your IPv6 and IPv4 networking by running a joke test via Mixnet:</li>
</ol>
<pre><code class="language-sh">./network_tunnel_manager.sh joke_through_the_mixnet
</code></pre>
<ol start="10">
<li>Validate your tunneling by running a joke test via WG:</li>
</ol>
<pre><code class="language-sh">./network_tunnel_manager.sh joke_through_wg_tunnel
</code></pre>
<ul>
<li><strong>Note:</strong> WireGuard will return only IPv4 joke, not IPv6. WG IPv6 is under development. Running IPR joke through the mixnet with <code>./network_tunnel_manager.sh joke_through_the_mixnet</code> should work with both IPv4 and IPv6!</li>
</ul>
<ol start="11">
<li>Now you can run your node with the <code>--wireguard-enabled true</code> flag or add it to your <a href="#systemd">systemd service config</a>. Restart your <code>nym-node</code> or <a href="#following-steps-for-nym-nodes-running-as-systemd-service">systemd</a> service (recommended):</li>
</ol>
<pre><code class="language-sh">systemctl daemon-reload &amp;&amp; systemctl restart nym-node.service
</code></pre>
<ul>
<li>Optionally, you can check if the node is running correctly by monitoring the service logs:</li>
</ul>
<pre><code class="language-sh">journalctl -u nym-node.service -f -n 100
</code></pre>
<p>Make sure that you get the validation of all connectivity. If there are still any problems, please refer to <a href="../troubleshooting/vps-isp.html#incorrect-gateway-network-check">troubleshooting section</a>.</p>
<h2 id="next-steps"><a class="header" href="#next-steps">Next Steps</a></h2>
<p>There are a few more good suggestions for <code>nym-node</code> configuration, like Web Secure Socket or Reversed Proxy setup. These are optional and you can skip them if you want. Visit <a href="proxy-configuration.html">Proxy configuration</a> page to see the guides.</p>
<footer id="last-change">Last change: 2024-09-10, commit: <a href="https://github.com/nymtech/nym/commit/12e8d3468">12e8d3468</a></footer>
                            </div>
                        </main>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../nodes/setup.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../nodes/proxy-configuration.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../nodes/setup.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../nodes/proxy-configuration.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>


        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src=".././themes/pagetoc.js"></script>



    </div>
    </body>
</html>
