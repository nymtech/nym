<html>
<head>
    <meta charset="utf-8"/>
    <script src="wasm_exec.js"></script>
    <script>
        const go = new Go();
        WebAssembly.instantiateStreaming(fetch("main.wasm"), go.importObject).then((result) => {
            go.run(result.instance);
        });
    </script>
</head>
<body>
<div>
    <button id="client-hello-button">ClientHello</button>

    <br>
    <label for="inputField">Enter (hex) Server Hello</label>
    <input id="inputField" name="ServerHello" type="text">
    <button id="server-hello-button">ServerHelloOk</button>

    <br>
    <br>
    <br>
    <button id="print-state-button">PrintConnection</button>
</div>
<script>
    var inputField = document.querySelector('#inputField')
    const clientHelloBtn = document.querySelector('#client-hello-button');
    clientHelloBtn.onclick = function() {
        console.log("client hello JS");
        // let wasmRes = wasmClientHello();
        let wasmRes = wasmClientHelloUtls();
        console.log("wasm res", wasmRes)
    }
    const serverHelloBtn = document.querySelector('#server-hello-button');
    serverHelloBtn.onclick = function () {
        console.log("server hello JS")

        let wasmRes = wasmInsertServerHello(inputField.value);
        console.log("wasm res", wasmRes)
    }

    const connBtn = document.querySelector('#print-state-button')
    connBtn.onclick = function() {
        wasmPrintConnection()
    }
</script>
</body>
</html>