services:
  validator:
    build:
      context: ./
      args: 
        UID: 1001
        GID: 1001
        NYM_CLI_GIT_TAG: "2025.8-tourist"
        WASMD_VERSION: "v0.54.0"
    image: validator:latest
    container_name: validator
    user: nym
    ports:
      - "127.0.0.1:26657:26657"
      - "127.0.0.1:26656:26656"
      - "127.0.0.1:1317:1317"
    restart: unless-stopped
    volumes:
      - "addresses_volume:/home/nym/output"  
      - "validator_data_volume:/home/nym/.nyxd"
    environment:
      BECH32_PREFIX: "ntest"
      DENOM: "nym"
      STAKE_DENOM: "nyx"
      WASMD_VERSION: "v0.54.0"
      CHAIN_ID: "nymtestnetwork"
      NYM_CLI_GIT_TAG: "2025.8-tourist"
      RETAIN_BLOCKS: "no"

volumes:
  validator_data_volume:
    driver: local
    driver_opts:
      type: 'none'
      o: 'bind'
      device: './data/validator'
  addresses_volume:
    driver: local
    driver_opts:
      type: 'none'
      o: 'bind'
      device: './data/addresses'